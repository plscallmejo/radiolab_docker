# docker-compose.yml
version: "2.3"
services:
    radiolab_flow:
        image: radiolab:latest
        runtime: nvidia
        shm_size: 512M
        user: _CURRENT_ID
        working_dir: /DATA
        container_name: radiolab_docker
        stdin_open: true
        environment:
            - HOME=_HOME_docker
            - LIBGL_ALWAYS_INDIRECT=0
            - NVIDIA_VISIBLE_DEVICES=all
            - DISPLAY=host.docker.internal:0.0
            - USER=_USER
#        network_mode: "host"
        ports:
            - 8888:8888
        volumes:
            - _HOME_local:_HOME_docker
            - _DATA:/DATA
            - _FS_LICENSE:/opt/freesurfer/license.txt
            - /tmp/.X11-unix:/tmp/.X11-unix:rw
            - ./build/tmp/group:/etc/group:ro
            - ./build/tmp/passwd:/etc/passwd:ro
        tty: true